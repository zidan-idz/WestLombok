{% extends "base.html" %}
{% load static %}

{% block content %}
    <!-- Hero Section -->
    <header class="relative w-full h-[60vh] bg-gray-400 flex items-center justify-center text-center overflow-hidden">
        {% if destination.main_image %}
        <div class="absolute inset-0 z-0">
             <img src="{{ destination.main_image.url }}" alt="{{ destination.name }}" class="w-full h-full object-cover">
        </div>
        <div class="absolute inset-0 bg-black/30 z-0"></div> <!-- Slight overlay for text readability -->
        {% endif %}
        
        <div class="relative z-10 px-4">
            <h1 class="font-oswald text-5xl md:text-7xl font-bold uppercase text-white tracking-widest mb-2 shadow-sm">
                {{ destination.name }}
            </h1>
            {% if destination.district %}
            <a href="{% url 'core:district_detail' destination.district.slug %}" class="font-roboto text-gray-100 text-lg md:text-xl font-light uppercase tracking-widest shadow-sm hover:text-yellow-400 transition cursor-pointer">
                {{ destination.district.name }} District
            </a>
            {% else %}
            <span class="font-roboto text-gray-100 text-lg md:text-xl font-light uppercase tracking-widest shadow-sm">
                Unknown District
            </span>
            {% endif %}
        </div>
    </header>

    <!-- Sub Header / Breadcrumb-ish -->
    <div class="bg-[#dcdcdc] py-4 border-b border-gray-300">
        <div class="container mx-auto px-6">
            <span class="font-oswald text-sm font-bold uppercase tracking-widest text-black">
                {{ destination.category.name }}
            </span>
        </div>
    </div>

    <!-- Main Content -->
    <section class="py-16 md:py-24 bg-white">
        <div class="container mx-auto px-6">
            <div class="grid grid-cols-1 md:grid-cols-12 gap-12">
                
                <!-- Left: Map / Image Placeholder -->
                <div class="md:col-span-6 lg:col-span-5">
                    <div class="w-full aspect-[4/5] bg-gray-200 rounded-sm overflow-hidden shadow-inner relative z-0">
                        <!-- Google Maps Embed Iframe -->
                        <iframe 
                            src="{{ destination.maps_embed_url }}" 
                            width="100%" 
                            height="100%" 
                            style="border:0;" 
                            allowfullscreen="" 
                            loading="lazy" 
                            referrerpolicy="no-referrer-when-downgrade"
                            class="transition duration-500">
                        </iframe>
                    </div>
                </div>

                <!-- Right: Description -->
                <div class="md:col-span-6 lg:col-span-7 flex flex-col justify-center">
                    <h2 class="font-oswald text-3xl md:text-4xl font-bold uppercase mb-8 text-black tracking-wide">
                        About The Destination
                    </h2>
                    
                    <div class="font-roboto font-light text-gray-700 leading-relaxed text-justify space-y-6 mb-12">
                        {{ destination.description|linebreaks }}
                    </div>

                    <!-- Details Details (Static/Placeholder per design) -->
                    <div class="border-t border-gray-200 pt-8 mt-auto">
                        <div class="grid grid-cols-[100px_1fr] gap-y-2 font-roboto text-sm text-black">
                            {{ destination.additional_info }}
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <!-- Gallery / Additional Photos -->
    <section class="py-12 bg-white pb-24">
        <div class="container mx-auto px-6">
            <h3 class="font-oswald text-xl font-bold uppercase mb-6 tracking-widest text-black">Gallery</h3>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-8 h-48 md:h-64">
                
                <!-- Slot 1 -->
                {% for gallery_item in destination.images.all %}
                <div class="w-full h-full bg-gray-200 rounded-sm overflow-hidden flex items-center justify-center group relative">
                    <img src="{{ gallery_item.image.url }}" alt="{{ gallery_item.caption|default:destination.name }}" class="w-full h-full object-cover transform duration-500 group-hover:scale-110 cursor-pointer">
                    {% if gallery_item.caption %}
                    <div class="absolute bottom-0 left-0 right-0 bg-black/50 text-white text-xs p-2 translate-y-full group-hover:translate-y-0 transition duration-300">
                        {{ gallery_item.caption }}
                    </div>
                    {% endif %}
                </div>
                {% empty %}
                <div class="col-span-full h-full flex items-center justify-center bg-gray-100 rounded-sm text-gray-400">
                    <span class="font-roboto italic">No gallery images available</span>
                </div>
                {% endfor %}

            </div>
        </div>
    </section>
{% endblock %}